package views

templ Layout(title string, isLoggedIn bool, csrf string, flash string, flashType string, contents templ.Component) {
	<!DOCTYPE html>
	<html lang="en" data-theme="night">
	<head>
		<meta charset="UTF-8"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<title>{ title } | Gosmic Code</title>
		<link rel="stylesheet" href="/static/css/app.css"/>
		<script src="/static/js/alpine.min.js" defer></script>
		<script src="/static/js/htmx.min.js"></script>
	</head>
	<body class="min-h-screen flex flex-col bg-base-100" hx-boost="true">
		<!-- Skip Link for Accessibility -->
		<a href="#main" class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-[100] focus:bg-primary focus:text-primary-content focus:px-4 focus:py-2 focus:rounded-md focus:font-semibold">
			Skip to main content
		</a>

		<!-- Navigation -->
		<nav aria-label="Main navigation" class="navbar bg-base-200/80 backdrop-blur-md sticky top-0 z-50 shadow-lg">
			<div class="navbar-start">
				<!-- Mobile menu -->
				<div class="dropdown">
					<div tabindex="0" role="button" aria-label="Open mobile menu" class="btn btn-ghost lg:hidden">
						<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h8m-8 6h16"/>
						</svg>
					</div>
					<ul tabindex="-1" class="menu menu-sm dropdown-content bg-base-200 rounded-box z-50 mt-3 w-52 p-2 shadow-lg" aria-label="Mobile navigation menu">
						<li><a href="/"><span role="img" aria-label="Home">ğŸ </span> Base</a></li>
						if isLoggedIn {
							<li><a href="/dashboard"><span role="img" aria-label="Dashboard">ğŸ“Š</span> Command Center</a></li>
							<li><a href="/dashboard/posts"><span role="img" aria-label="Posts">ğŸ“</span> Mission Logs</a></li>
							<li class="mt-2"><a href="/logout" class="text-warning"><span role="img" aria-label="Logout">ğŸšª</span> Abort Session</a></li>
						} else {
							<li><a href="/login"><span role="img" aria-label="Login">ğŸ”</span> Identify</a></li>
							<li><a href="/register" class="text-primary"><span role="img" aria-label="Register">ğŸš€</span> Enlist</a></li>
						}
					</ul>
				</div>
				<a href="/" class="btn btn-ghost text-xl font-bold" aria-label="Gosmic - Go to homepage">
					<span class="text-primary" role="img" aria-hidden="true">ğŸš€</span> Gosmic
				</a>
			</div>
			
			<!-- Desktop menu -->
			<div class="navbar-center hidden lg:flex">
				<ul class="menu menu-horizontal px-1 gap-1">
					<li><a href="/" class="hover:text-primary">Base</a></li>
					if isLoggedIn {
						<li><a href="/dashboard" class="hover:text-primary">Command Center</a></li>
						<li><a href="/dashboard/posts" class="hover:text-primary">Mission Logs</a></li>
					}
				</ul>
			</div>
			
			<div class="navbar-end gap-2">
				if isLoggedIn {
					<a href="/logout" class="btn btn-ghost btn-sm text-warning hover:bg-warning/20">
						Abort Session
					</a>
				} else {
					<a href="/login" class="btn btn-ghost btn-sm">Identify</a>
					<a href="/register" class="btn btn-primary btn-sm">Enlist</a>
				}
			</div>
		</nav>

		<!-- Flash Messages -->
		@FlashMessage(flash, flashType)

		<!-- Main Content -->
		<main id="main" role="main" class="container mx-auto px-4 py-8 max-w-6xl">
			@contents
		</main>

		<!-- Footer -->
		<footer class="footer footer-center bg-base-200 text-base-content p-10 mt-auto">
			<aside>
				<p class="text-sm opacity-80">
					Powered by <span class="text-primary font-semibold">Fiber v3</span> + 
					<span class="text-primary font-semibold">PocketBase</span> + 
					<span class="text-primary font-semibold">Alpine.js</span>
				</p>
				<p class="text-xs opacity-70 mt-2"><span role="img" aria-label="Lightning bolt">âš¡</span> Warp Drive Active â€¢ Ad Astra Per Aspera</p>
			</aside>
		</footer>
	</body>
	</html>
}

templ FlashMessage(flash string, flashType string) {
	if flash != "" {
		<div id="flash-message" hx-swap-oob="true" class="toast toast-top toast-end z-50" x-data="{ show: true }" x-show="show" x-transition x-init="setTimeout(() => show = false, 8000)" role="alert" aria-live="polite">
			if flashType == "success" {
				<div class="alert alert-success shadow-lg">
					<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 shrink-0 stroke-current" fill="none" viewBox="0 0 24 24" aria-hidden="true">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
					</svg>
					<span>{ flash }</span>
					<button type="button" @click="show = false" class="btn btn-ghost btn-xs" aria-label="Dismiss message">
						<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
					</button>
				</div>
			} else if flashType == "error" {
				<div class="alert alert-error shadow-lg">
					<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 shrink-0 stroke-current" fill="none" viewBox="0 0 24 24" aria-hidden="true">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"/>
					</svg>
					<span>{ flash }</span>
					<button type="button" @click="show = false" class="btn btn-ghost btn-xs" aria-label="Dismiss message">
						<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
					</button>
				</div>
			} else {
				<div class="alert alert-info shadow-lg">
					<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 shrink-0 stroke-current" fill="none" viewBox="0 0 24 24" aria-hidden="true">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
					</svg>
					<span>{ flash }</span>
					<button type="button" @click="show = false" class="btn btn-ghost btn-xs" aria-label="Dismiss message">
						<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
					</button>
				</div>
			}
		</div>
	}
}
